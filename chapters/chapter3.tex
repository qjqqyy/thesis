\chapter{Cohen Models}

Paul Cohen invented forcing to deal with CH in 1963.
He used it to prove the independence of Choice from \ZF and the independence of CH from \ZFC.
The techniques of forcing has been greatly reworked, simplified and improved by mathematicians over the years.
It is now a powerful and general technique that's applicable in many areas in mathematical logic.

According to Cohen's own account (see \autocite[1087]{cohen2002}),
in 1966 Gödel told Cohen that he had actually partially solved the independence problem for Choice, but not CH,
whilst denying the usage of type theory in his methods.
In 1967 however, Gödel wrote in a letter that he obtained some results in 1942,
but only for the independence of the axiom of constructibility (\(\V = \mathbf{L}\)), and in type theory (contradicting himself).
With the aura of mystique surrounding Gödel and his withdrawal from mathematics, we might never know what actually happened.

\section{Forcing}
\renewcommand*{\P}{{\mathbb{P}}}
\newcommand*{\forces}{\Vdash}

For the rest of this thesis, \(M\) shall denote our \emph{base model}, which is a countable transitive model of \ZFC.
\(\P\) will usually refer to a \emph{atomless}, or \emph{separative} partial order, in which every element has two incompatible extensions.
For a detailed exposition on forcing please see \autocite{kunen1980}.
Nevertheless, we briefly cover some known results that we need to invoke.

\begin{definition}
    Let \(\P\) be a partial order and \(\pi: \P\to\P\),
    \(\pi\) is an \emph{automorphism} on \(\P\) if
    \begin{itemize}
        \item \(\pi\) is a bijection,
        \item \(\pi\) preserves \(\leq\),
        \item \(\pi(1_{\P}) = 1_\P\).
    \end{itemize}
\end{definition}

\begin{definition} \label{defn:extend_automorphism_to_names}
    Given an automorphism \(\pi:\P\to\P\),
    it can be naturally extended into an automorphism (abusing notation) \(\pi: M^{\mathbb{P}} \to M^{\mathbb{P}}\) by
    \[ \pi(x,p) = \set{(\pi y , \pi p ): y\in x}. \]
\end{definition}

\begin{observation}
    If \(\pi:\P\to\P\) is an automorphism, its induced automorphism \(\pi: M^\P \to M^\P\) satisfies \(\pi(\check{x}) = \check{x}\).
\end{observation}

\begin{lemma}[Lemma 7.13 in {\autocite[222]{kunen1980}}, specialised to automorphisms] \label{lemma:forcing_invariant_under_pi}
    Suppose \(\pi, \P\in M\) and \(\pi:\P\to\P\) is an automorphism, then for any formula \(\phi(v_1,\dots,v_n)\),
    \[ p\forces \phi(x_1,\dots,x_n)\quad \text{ iff }\quad \pi(p)\forces \phi(\pi(x_1),\dots,\pi(x_n)).  \]
\end{lemma}

\begin{definition}
    A partial order \(\P\) is \emph{almost homogeneous} iff
    for any \(p,q\in\P\) there is an automorphism \(\pi\) on \(\P\) such that \(\pi(p)\) is compatible with \(q\).
\end{definition}

\begin{proposition} \label{proposition:property_almost_homo}
    Suppose \(\P\in M\) is almost homogeneous in \(M\).
    If \(p\forces \phi(\check{x}_1,\dots,\check{x}_n)\), then \(1_\P\forces \phi(\check{x}_1,\dots,\check{x}_n)\);
    thus, either \(1_\P\forces \phi(\check{x}_1,\dots,\check{x}_n)\) or \(1_\P\forces \lnot\phi(\check{x}_1,\dots,\check{x}_n)\).
\end{proposition}
\begin{proof}
    Assume \(p\forces \phi(\check{x}_1,\dots,\check{x}_n)\), we show \(1_\P\forces \phi(\check{x}_1,\dots,\check{x}_n)\).
    Let \(G\) be any generic filter, suppose \(M[G]\models \lnot\phi(x_1,\dots,x_n)\),
    and let it be forced by \(q\in G\), then there is an automorphism such that \(\pi(p)\) and \(q\) are compatible,
    but \(\pi(p)\) forces \(\phi(x_1,\dots,x_n)\).
    Since every true statement in \(M[G]\) is forced by some \(p\in\P\),
    either \(1_\P\forces \phi(\check{x}_1,\dots,\check{x}_n)\) or \(1_\P\forces \lnot\phi(\check{x}_1,\dots,\check{x}_n)\).
\end{proof}

\begin{lemma}[Product Lemma, 15.9 in {\autocite[229]{jech2003}}, 1.4 in {\autocite[252]{kunen1980}}]
    \label{lemma:iterated_forcing_product}
    Given posets \(\P_1\) and \(\P_2\),
    \(G\subseteq \P_1\times\P_2\) is generic over \(M\) iff
    \(G = G_1\times G_2\) where \(G_1\subseteq \P_1\) is generic over \(M\) and \(G_2\subseteq \P_2\) is generic over \(M[G_1]\).
    Moreover, \(M[G] = M[G_1][G_2]\).
\end{lemma}

\begin{theorem}[Intermediate Model Property, Lemma 15.43 in {\autocite[247]{jech2003}}]
    \label{proposition:intermediate_model_property}
    If \(M\subseteq N\subseteq M[G]\) are models of \ZFC,
    where \(M[G]\) is a forcing extension of \(M\) and \(N\) is an inner model of \(M[G]\),
    then \(N\) is also a forcing extension of \(M\) and
    \(M[G]\) is also a forcing extension of \(N\).
%    Furthermore, if \(G\) is \(M\)-generic, then there is some smaller partial order \(\P_0\subseteq \P\) in \(M\)
%    such that \(N = M[G_0]\) via \(G_0 = G \cap \P_0\), .... too much
\end{theorem}


\section{Symmetric Extensions}


\renewcommand*{\G}{\mathscr{G}}
\newcommand*{\dom}{\operatorname{dom}}
\newcommand*{\val}{\operatorname{val}}
Let \(M\) be a transitive model of ZFC, consider a set \((\mathbb{P}, \leq, 1_{\mathbb{P}}) \in M\) of forcing conditions,
let \(\G\) be a group of automorphisms \(\mathbb{P} \to \mathbb{P}\).
Each \(\pi\in \G\) can be naturally extended into an automorphism on \(M^\P\) as per \Cref{defn:extend_automorphism_to_names}.

\begin{definition}
    Let \(\mathscr{F}\) be a nonempty set of subgroups of \(\G\).
    \(\mathscr{F}\) is a \emph{normal filter} iff it is a filter and is also closed under conjugation, that is
    if \(\pi\in \G\) and \(H\in\mathscr{F}\) then \(\pi H \pi^{-1} \in\mathscr{F}\).
\end{definition}
Given a normal filter \(\mathscr{F}\) we can use it to define the notion of \emph{symmetric}.
\begin{definition}
    Let \(\mathscr{F}\) be a normal filter.
    \begin{itemize}
        \item A \(\mathbb{P}\)-name \(x\in M^{\mathbb{P}}\) is \emph{symmetric} if its stabilizer \(\G_x = \set{\pi: \pi x = x}\) is in \(\mathscr{F}\).
        \item A name \(x\in M^{\mathbb{P}}\) is \emph{hereditarily symmetric} if \(x\) is symmetric and every member in \(\dom(x)\) is hereditarily symmetric.
    \end{itemize}
    Denote set of hereditarily symmetric names as \(\mathbf{HS}\).
\end{definition}

\begin{definition}
    Now given any generic filter \(G\), we define the \emph{symmetric extension}
    by considering the subset of \(M[G]\) formed by evaluating all the names in \(\mathbf{HS}\),
    \[ N = \set{ \val_G(x): x\in M^{\mathbb{P}} }. \]
\end{definition}
\begin{observation}
    We have the embeddings \(M \subseteq N \subseteq M[G]\).
\end{observation}

\begin{theorem}
    \(N\) is a model of \ZF.
\end{theorem}
\begin{proof}
    \(N\) is transitive because any symmetric name \(x\in \mathbf{HS}\) satisfies \(\dom(x)\subseteq \mathbf{HS}\).

    For names \(x,y\), one can define names \(z_i\) for the result of the \(i\)-th Gödel operation on \(x, y\).
    In an argument similar to that in \Cref{theorem:f-k-model-zfminus}, we can see that \(\G_{z_i} = \G_x \cap \G_y \in \mathscr{F}\).

    Next we check that \(N\) is almost universal.
    It suffices to show that at each \(\alpha\), \(Y = \val_G''(\mathbf{HS} \cap M^P_\alpha\) is in \(N\).
    Define a name for \(Y\) as
    \[ \mathring{Y} = \set{ (x,1_\P): x\in \mathbf{HS} \cap  M^\P_\alpha }. \]
    It is easy to see that \(\dom(\mathring{Y}) \subseteq \mathbf{HS}\), we need to check that \(\mathring{Y}\) is a symmetric name.
    Again the argument is similar to that in \Cref{theorem:f-k-model-zfminus},
    if \(x\in M^\P\) and \(\pi\in\G\), then \(\G_{\pi x} = \pi \G_x \pi^{-1}\).
    Furthermore if \(x\in M^\P_\alpha\), \(\pi x\in M^\P_\alpha\) too.
    So we have \(\pi''(x\in \mathbf{HS} \cap  M^\P_\alpha) = x\in \mathbf{HS} \cap  M^\P_\alpha \) for all \(\pi\) and \(\alpha\).
\end{proof}

\section{Basic Cohen Model}

The Basic Cohen Model was the first model produced in which choice fails.
Together with Gödel's earlier results on \(\mathbf{L}\) (see \Cref{subsection:constructible}),
this completes the proof of the independence of choice.

We force with \(\mathbb{P} = \operatorname{Fn}(\omega\times\omega, 2)\)
the set of finite partial functions \(\omega\times\omega \rightharpoonup 2\),
ordered by reverse containment \(\leq = \supseteq\),
with \(1_\P = 0\) the empty function.

The idea is to add \(\omega\) many reals to our symmetric extension satisfying
\begin{equation} \label{basicCohen:property_x_n}
    x_n = \set{m\in\omega: \left(\exists p\in G\right) p(n,m) = 1}.
\end{equation}
After which, we apply the machinery from the previous section to construct an \(N\),
it should contain \( A = \set{x_n:n\in \omega } \) but not know how to well-order it.

Come up with \(\P\)-names for objects we wish to add
\begin{align*}
    \mathring{x}_n &= \set{(\check{m},p): m\in\omega, p\in\P,p(n,m) = 1} \\
    \mathring{A} &= \set{(\mathring{x}_n,1_\P): n\in\omega}
\end{align*}
Any permutation \(\pi: \omega \to \omega\) induces an automorphism \(\pi: \mathbb{P}\to\mathbb{P}\) as
\[ \pi = \set{((\pi n, m), y): ((n,m),y) \in p} \]
so we are extending a permutation on \(\omega\) into one on \(\operatorname{Fn}(\omega\times\omega, 2)\)
by applying it to the first coordinate of the domain.

Let \(\G\) be all such induced permutations on \(\mathbb{P}\), then for any finite \(B\subseteq \omega\),
we look at permutations induced by ones in its stabilizer
\[ \G_B = \set{ \pi\in \G: \forall n\in B\left( \pi n = n \right) }. \]
Use stabilizers of all finite subsets to generate a normal filter
\[ \mathscr{F} = \set{H: \exists \text{ finite } B\subseteq \omega \left(\G_B \subseteq H\right) }. \]
Let \(\G\) and \(\mathscr{F}\) determine \(\mathbf{HS}\) and if we let \(G\) be a generic filter, we yield a symmetric model \(N\).

By computation, we can verify the following property:
\begin{proposition}
    \(\pi \mathring{x}_n = \mathring{x}_{\pi n} \).
\end{proposition}
Its immediate consequence is:
\begin{corollary}
    \(\mathring{x}_n\) is symmetric as its stabilizer contains \(\G_\set{n}\).
\end{corollary}
As a result, we know that \(x_n\in N\) and \(A\in N\).

\begin{lemma}
    \(N\models x_i\ne x_j\) whenever \(i\ne j\)
\end{lemma}
\begin{proof}
    Suppose for contradiction that \(N\models x_i\ne x_j\),
    then let it be forced by \(p\in \P\) such that \(p\Vdash \mathring{x}_i = \mathring{x}_j\).
    As \(p\) is finite let \(m\in\omega\) such that \(p\) is not defined at both \((i,m)\) and \((j,m)\).
    We can then find an extension \(q\leq p\) with \(q(i,m) = 1\) and \(q(j,m) = 0\),
    applying \Cref{basicCohen:property_x_n}
    we see that \(q\) forces \(m\in x_i \land m\notin x_j\).
\end{proof}

\begin{lemma}
    There does not exist a bijection \(f:\omega\to A\).
\end{lemma}
\begin{proof}
Suppose there is, let \(p_0 \in G\) such that \[p_0\Vdash \mathring{f} \text{ is a bijection } \check{\omega}\to\mathring{A}. \]
As \(\mathring{f}\) is symmetric, let \(B\subseteq \omega\) be finite such that \(\G_B\) is contained in stabilizer of \(\mathring{f}\).
Let \(n\notin B, i\in\omega, p\leq p_0\) such that \[p\Vdash \mathring{f}(\check{i}) = \mathring{x}_n.\]
Now we can find \(\pi\in\G\) satisfying
\begin{enumerate}[i.]
    \item \(\pi p\) compatible with \(p\),
    \item \(\pi \in \G_B\),
    \item \(\pi n\ne n\).
\end{enumerate}
Then by \Cref{lemma:forcing_invariant_under_pi}, \(\pi p \Vdash (\pi \mathring{f})(\pi \check{i}) = \pi \mathring{x}_{n}\), so
\[p \cup \pi p \Vdash \mathring{f}(\check{i}) = \mathring{x}_n \land \mathring{f}(\check{i}) = \mathring{x}_{\pi n}. \]
This contradiction completes the proof.
\end{proof}

The construction of the Basic Cohen Model allows us to fully establish the independence of \Axiom{Choice} from the rest of \ZF.
\begin{theorem}
    The axiom of choice fails in \(N\) and is therefore independent of \ZF.
\end{theorem}




\section{Second Cohen Model}

In the second Cohen Model, the axiom of choice fails on a family of pairs which \(N\) knows is countable.


We force with \(\mathbb{P} = \operatorname{Fn}((\omega\times 2 \times\omega)\times\omega, 2)\)
the set of finite partial functions \((\omega\times 2 \times\omega)\times\omega \rightharpoonup 2\),
ordered by reverse containment \(\leq = \supseteq\),
with \(\mathbb{1}_\P = 0\) the empty function.

Define the notions (we omit names for this discussion):
\begin{align*}
    x_{n\epsilon i} &= \set{j\in\omega: \left(\exists p\in G\right) \left(p(n\epsilon i, j) = 1\right) }\\
    X_{n\epsilon} &= \set{x_{n\epsilon i}: i\in\omega}\\
    P_n &= \set{X_{n0}, X_{n1}}\\
    A &= \set{P_n:n\in\omega}
\end{align*}

Again we can extend permutations on \((\omega\times2\times\omega)\) to permutations on \(\P\) by doing the following
\[\pi p = \set{ ((\pi(n\epsilon i), j), y): (((n\epsilon i),j), y) \in p }.\]
Restrict our attention to permutations \(\pi\) satisfying
\begin{enumerate}[i.]
    \item \(n' = n\),
    \item for each \(n\) either \(\forall i\paren{\epsilon' = \epsilon}\) or \(\forall i\paren{\epsilon' \ne \epsilon}\)
\end{enumerate}
where \((n'\epsilon' i') = \pi(n\epsilon i)\).
Consider the automorphism group \(\G\) of all such permutations extended to \(\P\),
for any finite \(B\subset (\omega\times2\times\omega)\),
\[ \G_B = \set{ \pi\in \G: \forall n\in B\left( \pi n = n \right) }. \]
Again we can generate a normal filter, and proceed to get symmetric model.


\begin{proposition}
    \(x_{n\epsilon i}, X_{n\epsilon}, P_n, A\) all in \(N\) (their names are symmetric).
\end{proposition}
\begin{proof}
    Note that stabilizer of \(\mathring{x}_{n\epsilon i}\) contains \(G_{n\epsilon i}\),
    stabilizer of \(X_{n\epsilon}\) contains \(G_{n\epsilon i}\) where \(i\) is arbitrary,
    and stabilizers of \(P_n\) and \(A\) are both \(\G\).
\end{proof}

\begin{lemma}
    \(N\models A\text{ is countable}\).
\end{lemma}
\begin{proof}
  Define \(\mathring{g} = \set{((\check{n}, \mathring{P}_n), 1_\P): n\in\omega}\)
  \footnote{in this expression, \((\check{n}, \mathring{P}_n)\) is syntax sugar for the name which evaluates into this ordered pair,
  which is actually \(\set{\paren{\set{\paren{\check{n},1_\P}},1_\P},\paren{\set{\paren{\check{n},1_\P},\paren{\mathring{P}_n,1_\P}},1_\P}}\)},
  check that \(\mathring{g}\) is \(\mathbf{HS}\).
  Evaluating \(\mathring{g}\) will enumerate \(\left\langle P_n: n\in\omega\right\rangle\).
\end{proof}

\begin{theorem}
    \(N\) does not contain a choice function on \(A\).
\end{theorem}
\begin{proof}
Suppose \(f\) is a choice function on \(A\), let \(\mathring{f}\in\mathbf{HS}\) be its symmetric name and \(p_0\in G\) force
\[p_0\Vdash \mathring{f}\text{ is a function with domain } \mathring{A} \text{ and } \mathring{f}(\mathring{P}_n) \in \mathring{P}_n\text{ for all }n .\]
Let \(B\subseteq \omega\times2\times\omega\) such that stabiliser of \(\mathring{f}\) contains \(\G_B\),
let \(n\in\omega, p\leq p_0, \epsilon_0\) such that (without loss of generality let \(\epsilon_0 = 0\))
\[ p\Vdash \mathring{f}(\mathring{P}_n) = \mathring{X}_{n0}. \]
We can find \(\pi\in\G\) satisfying
\begin{enumerate}[i.]
    \item \(\pi p\) compatible with \(p\)
    \item \(\pi \in \G_B\)
    \item \(\pi(\mathring{X}_{n0}) = \pi(\mathring{X}_{n1})\)
\end{enumerate}
Observe that \(i\)-coordinate is ``free'',
we are free to shuffle the sequence \(\langle x_{n\epsilon i}:i\in\omega\rangle\).
Let \(\pi\) be extended from
\begin{align*}
    \pi(n,0,i) &=
    \begin{cases}
        (n,1,i+k) &\text{ when } i < k \\
        (n,1,i-k) &\text{ when } k \leq i < 2k \\
        (n,1,i) &\text{ otherwise}
    \end{cases} \\
    \pi(n,1,i) &= \text{similar to above} \\
    \pi(m,\epsilon,i) &= (m,\epsilon,i) \quad\text{ whenever }m \ne n
\end{align*}

With \(\pi\) obtained, use similar forcing argument as Cohen basic model to get
\[ N\models f\text{ is not a function}. \tag*{\qedhere} \]
\end{proof}
